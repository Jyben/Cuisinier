@using MudBlazor

<MudDivider Class="my-4" />
<MudText Typo="Typo.h6" Class="mb-3">Aliments de saison</MudText>
<MudRadioGroup T="string" Value="@_currentValue" ValueChanged="@OnValueChanged" Class="mb-4">
    <MudStack Row="true" Spacing="3" Wrap="Wrap.Wrap">
        <MudRadio T="string" Value="@("toujours")" Color="Color.Primary">Toujours utiliser des aliments de saison</MudRadio>
        <MudRadio T="string" Value="@("partiellement")" Color="Color.Primary">Partiellement</MudRadio>
        <MudRadio T="string" Value="@("jamais")" Color="Color.Primary">Peu importe la saison</MudRadio>
    </MudStack>
</MudRadioGroup>

@code {
    private string _currentValue = "toujours";

    [Parameter] public string Value { get; set; } = "toujours";
    [Parameter] public EventCallback<string> ValueChanged { get; set; }

    protected override void OnParametersSet()
    {
        _currentValue = string.IsNullOrEmpty(Value) ? "toujours" : Value;
    }

    private async Task OnValueChanged(string newValue)
    {
        _currentValue = newValue ?? "toujours";
        Value = _currentValue;
        await ValueChanged.InvokeAsync(_currentValue);
    }
}

